<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source" xml:lang="en-US">
<title>BH1750_WRAPPER.cpp</title>
<indexterm><primary>lib/BH1750/BH1750_WRAPPER.cpp</primary></indexterm>
Go to the documentation of this file.<programlisting linenumbering="unnumbered"><anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00001"/>00001 <emphasis role="comment">//&#32;BH1750Wrapper.cpp</emphasis>
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00002"/>00002 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="__b_h1750___w_r_a_p_p_e_r_8h">BH1750_WRAPPER.h</link>&quot;</emphasis>
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00003"/>00003 <emphasis role="preprocessor">#include&#32;&lt;string&gt;</emphasis>
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00004"/>00004 <emphasis role="preprocessor">#include&#32;&lt;iostream&gt;</emphasis>
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00005"/>00005 
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00006"/><link linkend="_class_b_h1750_wrapper_1a269ed77d8ed445c6fb4a9aa6f33b39df">00006</link> <link linkend="_class_b_h1750_wrapper_1a269ed77d8ed445c6fb4a9aa6f33b39df">BH1750Wrapper::BH1750Wrapper</link>()&#32;{
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00007"/>00007 &#32;&#32;&#32;&#32;<link linkend="_class_b_h1750_wrapper_1a254f46eb45a19e87f32ae62ca4ef0135">sensor</link>.configure(<link linkend="_class_b_h1750_1a8402147d4b96294da6362b538d4827c0afd7abdb36f193409d2a88bf176763911">BH1750::Mode::CONTINUOUS_HIGH_RES_MODE</link>);
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00008"/>00008 }
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00009"/>00009 
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00010"/><link linkend="_class_b_h1750_wrapper_1a2f9561a5cce4fe2241a0e74f69e4dadb">00010</link> <emphasis role="keywordtype">bool</emphasis>&#32;<link linkend="_class_b_h1750_wrapper_1a2f9561a5cce4fe2241a0e74f69e4dadb">BH1750Wrapper::init</link>()&#32;{
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00011"/>00011 &#32;&#32;&#32;&#32;<link linkend="_class_b_h1750_wrapper_1a260b8f66366a5174cc8b0b92dda72e31">initialized</link>&#32;=&#32;<link linkend="_class_b_h1750_wrapper_1a254f46eb45a19e87f32ae62ca4ef0135">sensor</link>.begin();
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00012"/>00012 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_class_b_h1750_wrapper_1a260b8f66366a5174cc8b0b92dda72e31">initialized</link>;
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00013"/>00013 }
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00014"/>00014 
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00015"/><link linkend="_class_b_h1750_wrapper_1a150e9bb5fb1185d6b1619565c66c5f62">00015</link> <emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_class_b_h1750_wrapper_1a150e9bb5fb1185d6b1619565c66c5f62">BH1750Wrapper::readData</link>(<link linkend="__i_sensor_8h_1a21b0301bb3eb76855366980212c8ae5e">SensorDataTypeIdentifier</link>&#32;type)&#32;{
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00016"/>00016 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(type&#32;==&#32;<link linkend="__i_sensor_8h_1a21b0301bb3eb76855366980212c8ae5eacda5661f062d9a45c6d0833b4a9509d5">SensorDataTypeIdentifier::LIGHT_LEVEL</link>)&#32;{
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00017"/>00017 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_class_b_h1750_wrapper_1a254f46eb45a19e87f32ae62ca4ef0135">sensor</link>.readLightLevel();
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00018"/>00018 &#32;&#32;&#32;&#32;}
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00019"/>00019 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;0.0f;
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00020"/>00020 }
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00021"/>00021 
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00022"/><link linkend="_class_b_h1750_wrapper_1a17eee3fe5b77e07d5aceed51c5277709">00022</link> <emphasis role="keywordtype">bool</emphasis>&#32;<link linkend="_class_b_h1750_wrapper_1a17eee3fe5b77e07d5aceed51c5277709">BH1750Wrapper::isInitialized</link>()<emphasis role="keyword">&#32;const&#32;</emphasis>{&#32;
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00023"/>00023 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_class_b_h1750_wrapper_1a260b8f66366a5174cc8b0b92dda72e31">initialized</link>;&#32;
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00024"/>00024 }
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00025"/>00025 
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00026"/><link linkend="_class_b_h1750_wrapper_1aa107682828326c965d10db863e704bde">00026</link> <link linkend="__i_sensor_8h_1a213c434cb928c4ca22513e2302632435">SensorType</link>&#32;<link linkend="_class_b_h1750_wrapper_1aa107682828326c965d10db863e704bde">BH1750Wrapper::getType</link>()<emphasis role="keyword">&#32;const&#32;</emphasis>{&#32;
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00027"/>00027 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="__i_sensor_8h_1a213c434cb928c4ca22513e2302632435af8589806bbf66241917092b2a6e18c6f">SensorType::LIGHT</link>;&#32;
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00028"/>00028 }
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00029"/>00029 
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00030"/><link linkend="_class_b_h1750_wrapper_1a721289913582b5222ca375cbbe6b43d6">00030</link> <emphasis role="keywordtype">bool</emphasis>&#32;<link linkend="_class_b_h1750_wrapper_1a721289913582b5222ca375cbbe6b43d6">BH1750Wrapper::configure</link>(<emphasis role="keyword">const</emphasis>&#32;std::map&lt;std::string,&#32;std::string&gt;&amp;&#32;config)&#32;{
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00031"/>00031 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(<emphasis role="keyword">const</emphasis>&#32;<emphasis role="keyword">auto</emphasis>&amp;&#32;[key,&#32;value]&#32;:&#32;config)&#32;{
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00032"/>00032 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(key&#32;==&#32;<emphasis role="stringliteral">&quot;measurement_mode&quot;</emphasis>)&#32;{
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00033"/>00033 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(value&#32;==&#32;<emphasis role="stringliteral">&quot;continuously_high_resolution&quot;</emphasis>)&#32;{
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00034"/>00034 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_b_h1750_wrapper_1a254f46eb45a19e87f32ae62ca4ef0135">sensor</link>.configure(<link linkend="_class_b_h1750_1a8402147d4b96294da6362b538d4827c0afd7abdb36f193409d2a88bf176763911">BH1750::Mode::CONTINUOUS_HIGH_RES_MODE</link>);
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00035"/>00035 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00036"/>00036 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>&#32;<emphasis role="keywordflow">if</emphasis>&#32;(value&#32;==&#32;<emphasis role="stringliteral">&quot;continuously_high_resolution_2&quot;</emphasis>)&#32;{
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00037"/>00037 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_b_h1750_wrapper_1a254f46eb45a19e87f32ae62ca4ef0135">sensor</link>.configure(<link linkend="_class_b_h1750_1a8402147d4b96294da6362b538d4827c0ac12663db8fda5e471cb5b946171a20b1">BH1750::Mode::CONTINUOUS_HIGH_RES_MODE_2</link>);
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00038"/>00038 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00039"/>00039 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>&#32;<emphasis role="keywordflow">if</emphasis>&#32;(value&#32;==&#32;<emphasis role="stringliteral">&quot;continuously_low_resolution&quot;</emphasis>)&#32;{
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00040"/>00040 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_b_h1750_wrapper_1a254f46eb45a19e87f32ae62ca4ef0135">sensor</link>.configure(<link linkend="_class_b_h1750_1a8402147d4b96294da6362b538d4827c0ac32e5d6f3f1a6561e874a4a8fd60723f">BH1750::Mode::CONTINUOUS_LOW_RES_MODE</link>);
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00041"/>00041 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00042"/>00042 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>&#32;<emphasis role="keywordflow">if</emphasis>&#32;(value&#32;==&#32;<emphasis role="stringliteral">&quot;one_time_high_resolution&quot;</emphasis>)&#32;{
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00043"/>00043 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_b_h1750_wrapper_1a254f46eb45a19e87f32ae62ca4ef0135">sensor</link>.configure(<link linkend="_class_b_h1750_1a8402147d4b96294da6362b538d4827c0ae6af2d70de1e4c57254d72b3b1b57e35">BH1750::Mode::ONE_TIME_HIGH_RES_MODE</link>);
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00044"/>00044 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00045"/>00045 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>&#32;<emphasis role="keywordflow">if</emphasis>&#32;(value&#32;==&#32;<emphasis role="stringliteral">&quot;one_time_high_resolution_2&quot;</emphasis>)&#32;{
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00046"/>00046 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_b_h1750_wrapper_1a254f46eb45a19e87f32ae62ca4ef0135">sensor</link>.configure(<link linkend="_class_b_h1750_1a8402147d4b96294da6362b538d4827c0a459f53ea14165ac4c845757c4c93022a">BH1750::Mode::ONE_TIME_HIGH_RES_MODE_2</link>);
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00047"/>00047 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00048"/>00048 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>&#32;<emphasis role="keywordflow">if</emphasis>&#32;(value&#32;==&#32;<emphasis role="stringliteral">&quot;one_time_low_resolution&quot;</emphasis>)&#32;{
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00049"/>00049 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_b_h1750_wrapper_1a254f46eb45a19e87f32ae62ca4ef0135">sensor</link>.configure(<link linkend="_class_b_h1750_1a8402147d4b96294da6362b538d4827c0a4f81ddfb660e4f3e0bc4228c61ff6dc6">BH1750::Mode::ONE_TIME_LOW_RES_MODE</link>);
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00050"/>00050 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00051"/>00051 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>&#32;{
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00052"/>00052 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;std::cerr&#32;&lt;&lt;&#32;<emphasis role="stringliteral">&quot;[BH1750Wrapper]&#32;Unknown&#32;measurement_mode&#32;value:&#32;&quot;</emphasis>&#32;&lt;&lt;&#32;value&#32;&lt;&lt;&#32;std::endl;
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00053"/>00053 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<emphasis role="keyword">false</emphasis>;
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00054"/>00054 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00055"/>00055 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00056"/>00056 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Handle&#32;additional&#32;configuration&#32;keys&#32;here</emphasis>
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00057"/>00057 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>&#32;{
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00058"/>00058 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;std::cerr&#32;&lt;&lt;&#32;<emphasis role="stringliteral">&quot;[BH1750Wrapper]&#32;Unknown&#32;configuration&#32;key:&#32;&quot;</emphasis>&#32;&lt;&lt;&#32;key&#32;&lt;&lt;&#32;std::endl;
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00059"/>00059 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<emphasis role="keyword">false</emphasis>;
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00060"/>00060 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00061"/>00061 &#32;&#32;&#32;&#32;}
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00062"/>00062 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<emphasis role="keyword">true</emphasis>;
<anchor xml:id="__b_h1750___w_r_a_p_p_e_r_8cpp_source_1l00063"/>00063 }
</programlisting></section>
