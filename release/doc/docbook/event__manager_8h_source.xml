<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="_event__manager_8h_source" xml:lang="en-US">
<title>event_manager.h</title>
Go to the documentation of this file.<programlisting linenumbering="unnumbered"><anchor xml:id="_event__manager_8h_source_1l00001"/><link linkend="_event__manager_8h_1a7984471c52fd4915392929f854c6620c">00001</link> <emphasis role="preprocessor">#ifndef&#32;EVENT_MANAGER_H</emphasis>
<anchor xml:id="_event__manager_8h_source_1l00002"/><link linkend="_event__manager_8h_1ab20b0c7772544cf5d318507f34231fbe">00002</link> <emphasis role="preprocessor">#define&#32;EVENT_MANAGER_H</emphasis>
<anchor xml:id="_event__manager_8h_source_1l00003"/><link linkend="_event__manager_8h_1ad4291fcb880eb5ecb178b53e32f55741">00003</link> 
<anchor xml:id="_event__manager_8h_source_1l00004"/><link linkend="_event__manager_8h_1aeef6900f411bc223febdd92c9435693b">00004</link> <emphasis role="preprocessor">#include&#32;&quot;<link linkend="__power_manager_8h">PowerManager.h</link>&quot;</emphasis>
<anchor xml:id="_event__manager_8h_source_1l00005"/>00005 <emphasis role="preprocessor">#include&#32;&lt;cstdint&gt;</emphasis>
<anchor xml:id="_event__manager_8h_source_1l00006"/><link linkend="_event__manager_8h_1a6bbf13289f6c919d96bae17ef018f988">00006</link> <emphasis role="preprocessor">#include&#32;&lt;string&gt;</emphasis>
<anchor xml:id="_event__manager_8h_source_1l00007"/>00007 <emphasis role="preprocessor">#include&#32;&quot;pico/mutex.h&quot;</emphasis>
<anchor xml:id="_event__manager_8h_source_1l00008"/>00008 
<anchor xml:id="_event__manager_8h_source_1l00009"/><link linkend="_event__manager_8h_1acc4dda1aaabc9862fe79fd94e0b722bf">00009</link> <emphasis role="preprocessor">#define&#32;EVENT_BUFFER_SIZE&#32;1000</emphasis>
<anchor xml:id="_event__manager_8h_source_1l00010"/>00010 
<anchor xml:id="_event__manager_8h_source_1l00011"/>00011 <emphasis role="comment">//&#32;Event&#32;Groups</emphasis>
<anchor xml:id="_event__manager_8h_source_1l00012"/><link linkend="_event__manager_8h_1a87aefa0e7b725125ea1a741c80858aa7">00012</link> <emphasis role="keyword">enum&#32;class</emphasis>&#32;<link linkend="_event__manager_8h_1a87aefa0e7b725125ea1a741c80858aa7">EventGroup</link>&#32;:&#32;uint8_t&#32;{
<anchor xml:id="_event__manager_8h_source_1l00013"/><link linkend="_event__manager_8h_1a87aefa0e7b725125ea1a741c80858aa7afa177138f94a7ea01f549b1aa7893d03">00013</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1a87aefa0e7b725125ea1a741c80858aa7afa177138f94a7ea01f549b1aa7893d03">SYSTEM</link>&#32;&#32;=&#32;0x00,
<anchor xml:id="_event__manager_8h_source_1l00014"/><link linkend="_event__manager_8h_1a87aefa0e7b725125ea1a741c80858aa7ac9c9c146c630ca5ef9197c73c032f4a6">00014</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1a87aefa0e7b725125ea1a741c80858aa7ac9c9c146c630ca5ef9197c73c032f4a6">POWER</link>&#32;&#32;&#32;=&#32;0x01,
<anchor xml:id="_event__manager_8h_source_1l00015"/><link linkend="_event__manager_8h_1a87aefa0e7b725125ea1a741c80858aa7ac9546343e8e677d92812a4443b3a1bd1">00015</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1a87aefa0e7b725125ea1a741c80858aa7ac9546343e8e677d92812a4443b3a1bd1">COMMS</link>&#32;&#32;&#32;=&#32;0x02,
<anchor xml:id="_event__manager_8h_source_1l00016"/><link linkend="_event__manager_8h_1a87aefa0e7b725125ea1a741c80858aa7a8c578de37278ada488d763ea86c5cf20">00016</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1a87aefa0e7b725125ea1a741c80858aa7a8c578de37278ada488d763ea86c5cf20">GPS</link>&#32;&#32;&#32;&#32;&#32;=&#32;0x03,
<anchor xml:id="_event__manager_8h_source_1l00017"/><link linkend="_event__manager_8h_1a87aefa0e7b725125ea1a741c80858aa7aca6c44800b2dc123e0d4389a867e8686">00017</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1a87aefa0e7b725125ea1a741c80858aa7aca6c44800b2dc123e0d4389a867e8686">CLOCK</link>&#32;&#32;&#32;=&#32;0x04
<anchor xml:id="_event__manager_8h_source_1l00018"/>00018 };
<anchor xml:id="_event__manager_8h_source_1l00019"/>00019 
<anchor xml:id="_event__manager_8h_source_1l00020"/>00020 <emphasis role="comment">//&#32;System&#32;Events</emphasis>
<anchor xml:id="_event__manager_8h_source_1l00021"/><link linkend="_event__manager_8h_1a77219d2f280eaad8c79825f50cf78785">00021</link> <emphasis role="keyword">enum&#32;class</emphasis>&#32;<link linkend="_event__manager_8h_1a77219d2f280eaad8c79825f50cf78785">SystemEvent</link>&#32;:&#32;uint8_t&#32;{
<anchor xml:id="_event__manager_8h_source_1l00022"/><link linkend="_event__manager_8h_1a77219d2f280eaad8c79825f50cf78785adf9a77cdc2fe29972274b189cf7bac7c">00022</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1a77219d2f280eaad8c79825f50cf78785adf9a77cdc2fe29972274b189cf7bac7c">BOOT</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&#32;0x01,
<anchor xml:id="_event__manager_8h_source_1l00023"/><link linkend="_event__manager_8h_1a77219d2f280eaad8c79825f50cf78785ab9984206799a7f9fe4bd1b6c18db8112">00023</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1a77219d2f280eaad8c79825f50cf78785ab9984206799a7f9fe4bd1b6c18db8112">SHUTDOWN</link>&#32;&#32;&#32;&#32;&#32;&#32;=&#32;0x02,
<anchor xml:id="_event__manager_8h_source_1l00024"/><link linkend="_event__manager_8h_1a77219d2f280eaad8c79825f50cf78785aeaa5ce6b67cf5155de76d00a3bb3ff71">00024</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1a77219d2f280eaad8c79825f50cf78785aeaa5ce6b67cf5155de76d00a3bb3ff71">WATCHDOG_RESET</link>&#32;=&#32;0x03,
<anchor xml:id="_event__manager_8h_source_1l00025"/><link linkend="_event__manager_8h_1a77219d2f280eaad8c79825f50cf78785a8021d59157f0850e2f519e17235a286e">00025</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1a77219d2f280eaad8c79825f50cf78785a8021d59157f0850e2f519e17235a286e">CORE1_START</link>&#32;&#32;&#32;=&#32;0x04,
<anchor xml:id="_event__manager_8h_source_1l00026"/><link linkend="_event__manager_8h_1a77219d2f280eaad8c79825f50cf78785a187bb9570e10c85b4a616f289f49837c">00026</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1a77219d2f280eaad8c79825f50cf78785a187bb9570e10c85b4a616f289f49837c">CORE1_STOP</link>&#32;&#32;&#32;&#32;=&#32;0x05
<anchor xml:id="_event__manager_8h_source_1l00027"/>00027 };
<anchor xml:id="_event__manager_8h_source_1l00028"/>00028 
<anchor xml:id="_event__manager_8h_source_1l00029"/>00029 <emphasis role="comment">//&#32;Power&#32;Events</emphasis>
<anchor xml:id="_event__manager_8h_source_1l00030"/><link linkend="_event__manager_8h_1a8b04683add0105a3bf3200eee3d9d3e6">00030</link> <emphasis role="keyword">enum&#32;class</emphasis>&#32;<link linkend="_event__manager_8h_1a8b04683add0105a3bf3200eee3d9d3e6">PowerEvent</link>&#32;:&#32;uint8_t&#32;{
<anchor xml:id="_event__manager_8h_source_1l00031"/><link linkend="_event__manager_8h_1a8b04683add0105a3bf3200eee3d9d3e6a36d76a2d86f6dbf2035366b3572f025c">00031</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1a8b04683add0105a3bf3200eee3d9d3e6a36d76a2d86f6dbf2035366b3572f025c">LOW_BATTERY</link>&#32;&#32;&#32;&#32;&#32;&#32;=&#32;0x01,
<anchor xml:id="_event__manager_8h_source_1l00032"/><link linkend="_event__manager_8h_1a8b04683add0105a3bf3200eee3d9d3e6a575fea54d116603bb4c778db18fbde98">00032</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1a8b04683add0105a3bf3200eee3d9d3e6a575fea54d116603bb4c778db18fbde98">OVERCHARGE</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&#32;0x02,
<anchor xml:id="_event__manager_8h_source_1l00033"/><link linkend="_event__manager_8h_1a8b04683add0105a3bf3200eee3d9d3e6a8700d6b962e860d93b3c89489b9aac21">00033</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1a8b04683add0105a3bf3200eee3d9d3e6a8700d6b962e860d93b3c89489b9aac21">POWER_FALLING</link>&#32;&#32;&#32;&#32;=&#32;0x03,
<anchor xml:id="_event__manager_8h_source_1l00034"/><link linkend="_event__manager_8h_1a8b04683add0105a3bf3200eee3d9d3e6a91d809be807947101ea242de92b64a87">00034</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1a8b04683add0105a3bf3200eee3d9d3e6a91d809be807947101ea242de92b64a87">POWER_NORMAL</link>&#32;&#32;&#32;&#32;&#32;=&#32;0x04,
<anchor xml:id="_event__manager_8h_source_1l00035"/><link linkend="_event__manager_8h_1a8b04683add0105a3bf3200eee3d9d3e6aa45a91985c176d6b5d3669bdf41b7e3b">00035</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1a8b04683add0105a3bf3200eee3d9d3e6aa45a91985c176d6b5d3669bdf41b7e3b">SOLAR_ACTIVE</link>&#32;&#32;&#32;&#32;&#32;=&#32;0x05,
<anchor xml:id="_event__manager_8h_source_1l00036"/><link linkend="_event__manager_8h_1a8b04683add0105a3bf3200eee3d9d3e6a35899506cd4cd1e676d022eb14ecb669">00036</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1a8b04683add0105a3bf3200eee3d9d3e6a35899506cd4cd1e676d022eb14ecb669">SOLAR_INACTIVE</link>&#32;&#32;&#32;=&#32;0x06,
<anchor xml:id="_event__manager_8h_source_1l00037"/><link linkend="_event__manager_8h_1a8b04683add0105a3bf3200eee3d9d3e6aea2afd0110180e8af5bf95a583f9dd13">00037</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1a8b04683add0105a3bf3200eee3d9d3e6aea2afd0110180e8af5bf95a583f9dd13">USB_CONNECTED</link>&#32;&#32;&#32;&#32;=&#32;0x07,
<anchor xml:id="_event__manager_8h_source_1l00038"/><link linkend="_event__manager_8h_1a8b04683add0105a3bf3200eee3d9d3e6a3a026550c6805c690d88a618aff891c9">00038</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1a8b04683add0105a3bf3200eee3d9d3e6a3a026550c6805c690d88a618aff891c9">USB_DISCONNECTED</link>&#32;=&#32;0x08
<anchor xml:id="_event__manager_8h_source_1l00039"/>00039 };
<anchor xml:id="_event__manager_8h_source_1l00040"/>00040 
<anchor xml:id="_event__manager_8h_source_1l00041"/>00041 <emphasis role="comment">//&#32;Communication&#32;Events</emphasis>
<anchor xml:id="_event__manager_8h_source_1l00042"/><link linkend="_event__manager_8h_1a0270a0464efae26aefb8cf32a45e20ad">00042</link> <emphasis role="keyword">enum&#32;class</emphasis>&#32;<link linkend="_event__manager_8h_1a0270a0464efae26aefb8cf32a45e20ad">CommsEvent</link>&#32;:&#32;uint8_t&#32;{
<anchor xml:id="_event__manager_8h_source_1l00043"/><link linkend="_event__manager_8h_1a0270a0464efae26aefb8cf32a45e20ada6651a96516b323db8bad9897081d76ed">00043</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1a0270a0464efae26aefb8cf32a45e20ada6651a96516b323db8bad9897081d76ed">RADIO_INIT</link>&#32;&#32;&#32;&#32;=&#32;0x01,
<anchor xml:id="_event__manager_8h_source_1l00044"/><link linkend="_event__manager_8h_1a0270a0464efae26aefb8cf32a45e20ada3b9824cc8a230f50d285d16795daa859">00044</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1a0270a0464efae26aefb8cf32a45e20ada3b9824cc8a230f50d285d16795daa859">RADIO_ERROR</link>&#32;&#32;&#32;=&#32;0x02,
<anchor xml:id="_event__manager_8h_source_1l00045"/><link linkend="_event__manager_8h_1a0270a0464efae26aefb8cf32a45e20adaca7aa0062ea158ea48dfc6bc919193bd">00045</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1a0270a0464efae26aefb8cf32a45e20adaca7aa0062ea158ea48dfc6bc919193bd">MSG_RECEIVED</link>&#32;&#32;=&#32;0x03,
<anchor xml:id="_event__manager_8h_source_1l00046"/><link linkend="_event__manager_8h_1a0270a0464efae26aefb8cf32a45e20adaae15180da5243a7f3be270d71d5eed28">00046</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1a0270a0464efae26aefb8cf32a45e20adaae15180da5243a7f3be270d71d5eed28">MSG_SENT</link>&#32;&#32;&#32;&#32;&#32;&#32;=&#32;0x04,
<anchor xml:id="_event__manager_8h_source_1l00047"/><link linkend="_event__manager_8h_1a0270a0464efae26aefb8cf32a45e20adae7987a4741412b725a5a1a24867f9b62">00047</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1a0270a0464efae26aefb8cf32a45e20adae7987a4741412b725a5a1a24867f9b62">UART_ERROR</link>&#32;&#32;&#32;&#32;=&#32;0x06
<anchor xml:id="_event__manager_8h_source_1l00048"/>00048 };
<anchor xml:id="_event__manager_8h_source_1l00049"/>00049 
<anchor xml:id="_event__manager_8h_source_1l00050"/>00050 <emphasis role="comment">//&#32;GPS&#32;Events</emphasis>
<anchor xml:id="_event__manager_8h_source_1l00051"/><link linkend="_event__manager_8h_1ac4e11c8779c20adc9210532538cdc463">00051</link> <emphasis role="keyword">enum&#32;class</emphasis>&#32;<link linkend="_event__manager_8h_1ac4e11c8779c20adc9210532538cdc463">GPSEvent</link>&#32;:&#32;uint8_t&#32;{
<anchor xml:id="_event__manager_8h_source_1l00052"/><link linkend="_event__manager_8h_1ac4e11c8779c20adc9210532538cdc463af510b97de4ace11844b85f23d0fc012f">00052</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1ac4e11c8779c20adc9210532538cdc463af510b97de4ace11844b85f23d0fc012f">LOCK</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&#32;0x01,
<anchor xml:id="_event__manager_8h_source_1l00053"/><link linkend="_event__manager_8h_1ac4e11c8779c20adc9210532538cdc463ac6daca30aef2af1d72715733825806a3">00053</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1ac4e11c8779c20adc9210532538cdc463ac6daca30aef2af1d72715733825806a3">LOST</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&#32;0x02,
<anchor xml:id="_event__manager_8h_source_1l00054"/><link linkend="_event__manager_8h_1ac4e11c8779c20adc9210532538cdc463abb1ca97ec761fc37101737ba0aa2e7c5">00054</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1ac4e11c8779c20adc9210532538cdc463abb1ca97ec761fc37101737ba0aa2e7c5">ERROR</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&#32;0x03,
<anchor xml:id="_event__manager_8h_source_1l00055"/><link linkend="_event__manager_8h_1ac4e11c8779c20adc9210532538cdc463a3d6fc432ff9e2d9b890c591179a4401e">00055</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1ac4e11c8779c20adc9210532538cdc463a3d6fc432ff9e2d9b890c591179a4401e">POWER_ON</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&#32;0x04,
<anchor xml:id="_event__manager_8h_source_1l00056"/><link linkend="_event__manager_8h_1ac4e11c8779c20adc9210532538cdc463aa15cea80d926d7282b831d451ba8aee8">00056</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1ac4e11c8779c20adc9210532538cdc463aa15cea80d926d7282b831d451ba8aee8">POWER_OFF</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&#32;0x05,
<anchor xml:id="_event__manager_8h_source_1l00057"/><link linkend="_event__manager_8h_1ac4e11c8779c20adc9210532538cdc463a8ee0c87d41412c8df555d1b18ff43e63">00057</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1ac4e11c8779c20adc9210532538cdc463a8ee0c87d41412c8df555d1b18ff43e63">DATA_READY</link>&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&#32;0x06,
<anchor xml:id="_event__manager_8h_source_1l00058"/><link linkend="_event__manager_8h_1ac4e11c8779c20adc9210532538cdc463aad25373b52902ffec9bef3591da75390">00058</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1ac4e11c8779c20adc9210532538cdc463aad25373b52902ffec9bef3591da75390">PASS_THROUGH_START</link>&#32;&#32;=&#32;0x07,
<anchor xml:id="_event__manager_8h_source_1l00059"/><link linkend="_event__manager_8h_1ac4e11c8779c20adc9210532538cdc463a2806fc6062c22a550a6d2039ab209e4c">00059</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1ac4e11c8779c20adc9210532538cdc463a2806fc6062c22a550a6d2039ab209e4c">PASS_THROUGH_END</link>&#32;&#32;&#32;&#32;=&#32;0x08,
<anchor xml:id="_event__manager_8h_source_1l00060"/>00060 };
<anchor xml:id="_event__manager_8h_source_1l00061"/>00061 
<anchor xml:id="_event__manager_8h_source_1l00062"/>00062 <emphasis role="comment">//&#32;Clock&#32;Events</emphasis>
<anchor xml:id="_event__manager_8h_source_1l00063"/><link linkend="_event__manager_8h_1a163ce349de3451c81f50080e5fbe62a2">00063</link> <emphasis role="keyword">enum&#32;class</emphasis>&#32;<link linkend="_event__manager_8h_1a163ce349de3451c81f50080e5fbe62a2">ClockEvent</link>&#32;:&#32;uint8_t&#32;{
<anchor xml:id="_event__manager_8h_source_1l00064"/><link linkend="_event__manager_8h_1a163ce349de3451c81f50080e5fbe62a2ae6b94e58bfd13b21bc786578d9f8ba4a">00064</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1a163ce349de3451c81f50080e5fbe62a2ae6b94e58bfd13b21bc786578d9f8ba4a">CHANGED</link>&#32;&#32;=&#32;0x01,
<anchor xml:id="_event__manager_8h_source_1l00065"/><link linkend="_event__manager_8h_1a163ce349de3451c81f50080e5fbe62a2a2d05bfe5f19cdad10f55634937f0b61e">00065</link> &#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1a163ce349de3451c81f50080e5fbe62a2a2d05bfe5f19cdad10f55634937f0b61e">GPS_SYNC</link>&#32;=&#32;0x02
<anchor xml:id="_event__manager_8h_source_1l00066"/>00066 };
<anchor xml:id="_event__manager_8h_source_1l00067"/>00067 
<anchor xml:id="_event__manager_8h_source_1l00068"/>00068 
<anchor xml:id="_event__manager_8h_source_1l00069"/><link linkend="_class_event_log">00069</link> <emphasis role="keyword">class&#32;</emphasis><link linkend="_class_event_log">EventLog</link>&#32;{
<anchor xml:id="_event__manager_8h_source_1l00070"/>00070 <emphasis role="keyword">public</emphasis>:
<anchor xml:id="_event__manager_8h_source_1l00071"/><link linkend="_class_event_log_1a5e0923e12450e6b7c782c7f6630f4563">00071</link> &#32;&#32;&#32;&#32;uint16_t&#32;<link linkend="_class_event_log_1a5e0923e12450e6b7c782c7f6630f4563">id</link>;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Sequence&#32;number</emphasis>
<anchor xml:id="_event__manager_8h_source_1l00072"/><link linkend="_class_event_log_1aea248a425dedf15b5cee31ce2884db40">00072</link> &#32;&#32;&#32;&#32;uint32_t&#32;<link linkend="_class_event_log_1aea248a425dedf15b5cee31ce2884db40">timestamp</link>;&#32;&#32;&#32;<emphasis role="comment">//&#32;Unix&#32;timestamp&#32;or&#32;system&#32;time</emphasis>
<anchor xml:id="_event__manager_8h_source_1l00073"/><link linkend="_class_event_log_1a5209ffdb8dc4bf7f87f3ec44b2ae63e3">00073</link> &#32;&#32;&#32;&#32;uint8_t&#32;<link linkend="_class_event_log_1a5209ffdb8dc4bf7f87f3ec44b2ae63e3">group</link>;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Event&#32;group&#32;identifier</emphasis>
<anchor xml:id="_event__manager_8h_source_1l00074"/><link linkend="_class_event_log_1a4ba1b6d820bf66740aac49fd299f1ea2">00074</link> &#32;&#32;&#32;&#32;uint8_t&#32;<link linkend="_class_event_log_1a4ba1b6d820bf66740aac49fd299f1ea2">event</link>;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Specific&#32;event&#32;identifier</emphasis>
<anchor xml:id="_event__manager_8h_source_1l00075"/>00075 
<anchor xml:id="_event__manager_8h_source_1l00076"/><link linkend="_class_event_log_1adb17c412276c8678289395607c493e7e">00076</link> &#32;&#32;&#32;&#32;std::string&#32;<link linkend="_class_event_log_1adb17c412276c8678289395607c493e7e">toString</link>()<emphasis role="keyword">&#32;const&#32;</emphasis>{
<anchor xml:id="_event__manager_8h_source_1l00077"/>00077 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">char</emphasis>&#32;<link linkend="_main_8cpp_1af00b615ca097c43dbb02ae3a00ea3a62">buffer</link>[256];
<anchor xml:id="_event__manager_8h_source_1l00078"/>00078 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;snprintf(<link linkend="_main_8cpp_1af00b615ca097c43dbb02ae3a00ea3a62">buffer</link>,&#32;<emphasis role="keyword">sizeof</emphasis>(<link linkend="_main_8cpp_1af00b615ca097c43dbb02ae3a00ea3a62">buffer</link>),
<anchor xml:id="_event__manager_8h_source_1l00079"/>00079 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;EventLog:&#32;id=%u,&#32;timestamp=%lu,&#32;group=%u,&#32;event=%u&quot;</emphasis>,
<anchor xml:id="_event__manager_8h_source_1l00080"/>00080 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">id</emphasis>,&#32;<link linkend="_class_event_log_1aea248a425dedf15b5cee31ce2884db40">timestamp</link>,&#32;<link linkend="_class_event_log_1a5209ffdb8dc4bf7f87f3ec44b2ae63e3">group</link>,&#32;<link linkend="_class_event_log_1a4ba1b6d820bf66740aac49fd299f1ea2">event</link>);
<anchor xml:id="_event__manager_8h_source_1l00081"/>00081 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;std::string(<link linkend="_main_8cpp_1af00b615ca097c43dbb02ae3a00ea3a62">buffer</link>);
<anchor xml:id="_event__manager_8h_source_1l00082"/>00082 &#32;&#32;&#32;&#32;}
<anchor xml:id="_event__manager_8h_source_1l00083"/>00083 }&#32;<link linkend="_event__manager_8h_1a179817c61d3e66c0f67cd6bfe5e84c1b">__attribute__</link>((packed));
<anchor xml:id="_event__manager_8h_source_1l00084"/>00084 &#32;&#32;&#32;&#32;
<anchor xml:id="_event__manager_8h_source_1l00085"/><link linkend="_class_event_manager">00085</link> <emphasis role="keyword">class&#32;</emphasis><link linkend="_class_event_manager_1a89099b22114f158b5c530edfea52371d">EventManager</link>&#32;{
<anchor xml:id="_event__manager_8h_source_1l00086"/>00086 <emphasis role="keyword">public</emphasis>:
<anchor xml:id="_event__manager_8h_source_1l00087"/><link linkend="_class_event_manager_1a89099b22114f158b5c530edfea52371d">00087</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_event_manager_1a89099b22114f158b5c530edfea52371d">EventManager</link>()&#32;
<anchor xml:id="_event__manager_8h_source_1l00088"/>00088 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;:&#32;<link linkend="_class_event_manager_1ab74418c8064525f34692dff74dd28d82">eventCount</link>(0)
<anchor xml:id="_event__manager_8h_source_1l00089"/>00089 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;,&#32;<link linkend="_class_event_manager_1ad97f788895da6e30b3237982a7bcd810">writeIndex</link>(0)
<anchor xml:id="_event__manager_8h_source_1l00090"/>00090 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;,&#32;<link linkend="_class_event_manager_1a31b1b079c272a1d7022ed84b01927186">nextEventId</link>(0)
<anchor xml:id="_event__manager_8h_source_1l00091"/>00091 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;,&#32;<link linkend="_class_event_manager_1aed2eb3a8bc611f5594eb62304c7b4754">needsPersistence</link>(false)&#32;
<anchor xml:id="_event__manager_8h_source_1l00092"/>00092 &#32;&#32;&#32;&#32;{
<anchor xml:id="_event__manager_8h_source_1l00093"/>00093 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;mutex_init(&amp;<link linkend="_class_event_manager_1a970381a54ae432d262830ad74048c94e">eventMutex</link>);
<anchor xml:id="_event__manager_8h_source_1l00094"/>00094 &#32;&#32;&#32;&#32;}
<anchor xml:id="_event__manager_8h_source_1l00095"/>00095 
<anchor xml:id="_event__manager_8h_source_1l00096"/><link linkend="_class_event_manager_1ade6acde43327a4e792bb8256dd6350f0">00096</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">virtual</emphasis>&#32;<link linkend="_class_event_manager_1ade6acde43327a4e792bb8256dd6350f0">~EventManager</link>()&#32;=&#32;<emphasis role="keywordflow">default</emphasis>;
<anchor xml:id="_event__manager_8h_source_1l00097"/>00097 
<anchor xml:id="_event__manager_8h_source_1l00098"/>00098 &#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;Add&#32;initialization&#32;method</emphasis>
<anchor xml:id="_event__manager_8h_source_1l00099"/><link linkend="_class_event_manager_1ab9c4d0fbfc9cf7743eac02bee6223728">00099</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">virtual</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_event_manager_1ab9c4d0fbfc9cf7743eac02bee6223728">init</link>()&#32;{
<anchor xml:id="_event__manager_8h_source_1l00100"/>00100 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_event_manager_1a6722258e4e3df939224d07786427afc9">loadFromStorage</link>();
<anchor xml:id="_event__manager_8h_source_1l00101"/>00101 &#32;&#32;&#32;&#32;}
<anchor xml:id="_event__manager_8h_source_1l00102"/>00102 &#32;&#32;&#32;&#32;
<anchor xml:id="_event__manager_8h_source_1l00103"/>00103 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_event_manager_1ae73a56091dc8713bb86a11abb6742a14">logEvent</link>(uint8_t&#32;<link linkend="_event__manager_8h_1ad4291fcb880eb5ecb178b53e32f55741">group</link>,&#32;uint8_t&#32;<link linkend="_event__manager_8h_1aeef6900f411bc223febdd92c9435693b">event</link>);
<anchor xml:id="_event__manager_8h_source_1l00104"/>00104 &#32;&#32;&#32;&#32;<emphasis role="keyword">const</emphasis>&#32;<link linkend="_class_event_log">EventLog</link>&amp;&#32;<link linkend="_class_event_manager_1a00648cfe8c39fbd59cc4c593113e5573">getEvent</link>(<emphasis role="keywordtype">size_t</emphasis>&#32;index)&#32;<emphasis role="keyword">const</emphasis>;
<anchor xml:id="_event__manager_8h_source_1l00105"/><link linkend="_class_event_manager_1abd8630355ef48f46c5286f232adb5993">00105</link> &#32;&#32;&#32;&#32;<emphasis role="keywordtype">size_t</emphasis>&#32;<link linkend="_class_event_manager_1abd8630355ef48f46c5286f232adb5993">getEventCount</link>()<emphasis role="keyword">&#32;const&#32;</emphasis>{&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_class_event_manager_1ab74418c8064525f34692dff74dd28d82">eventCount</link>;&#32;}
<anchor xml:id="_event__manager_8h_source_1l00106"/>00106 &#32;&#32;&#32;&#32;
<anchor xml:id="_event__manager_8h_source_1l00107"/><link linkend="_class_event_manager_1ad369ac9b7ab0251070e0075745836a40">00107</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">virtual</emphasis>&#32;<emphasis role="keywordtype">bool</emphasis>&#32;<link linkend="_class_event_manager_1ad369ac9b7ab0251070e0075745836a40">saveToStorage</link>()&#32;=&#32;0;
<anchor xml:id="_event__manager_8h_source_1l00108"/><link linkend="_class_event_manager_1a6722258e4e3df939224d07786427afc9">00108</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">virtual</emphasis>&#32;<emphasis role="keywordtype">bool</emphasis>&#32;<link linkend="_class_event_manager_1a6722258e4e3df939224d07786427afc9">loadFromStorage</link>()&#32;=&#32;0;
<anchor xml:id="_event__manager_8h_source_1l00109"/>00109 
<anchor xml:id="_event__manager_8h_source_1l00110"/>00110 <emphasis role="keyword">protected</emphasis>:
<anchor xml:id="_event__manager_8h_source_1l00111"/><link linkend="_class_event_manager_1a9d82f66074e141f352bb852654673536">00111</link> &#32;&#32;&#32;&#32;<link linkend="_class_event_log">EventLog</link>&#32;<link linkend="_class_event_manager_1a9d82f66074e141f352bb852654673536">events</link>[<link linkend="_event__manager_8h_1acc4dda1aaabc9862fe79fd94e0b722bf">EVENT_BUFFER_SIZE</link>];
<anchor xml:id="_event__manager_8h_source_1l00112"/><link linkend="_class_event_manager_1ab74418c8064525f34692dff74dd28d82">00112</link> &#32;&#32;&#32;&#32;<emphasis role="keywordtype">size_t</emphasis>&#32;<link linkend="_class_event_manager_1ab74418c8064525f34692dff74dd28d82">eventCount</link>;
<anchor xml:id="_event__manager_8h_source_1l00113"/><link linkend="_class_event_manager_1ad97f788895da6e30b3237982a7bcd810">00113</link> &#32;&#32;&#32;&#32;<emphasis role="keywordtype">size_t</emphasis>&#32;<link linkend="_class_event_manager_1ad97f788895da6e30b3237982a7bcd810">writeIndex</link>;
<anchor xml:id="_event__manager_8h_source_1l00114"/><link linkend="_class_event_manager_1a970381a54ae432d262830ad74048c94e">00114</link> &#32;&#32;&#32;&#32;mutex_t&#32;<link linkend="_class_event_manager_1a970381a54ae432d262830ad74048c94e">eventMutex</link>;
<anchor xml:id="_event__manager_8h_source_1l00115"/><link linkend="_class_event_manager_1a31b1b079c272a1d7022ed84b01927186">00115</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">volatile</emphasis>&#32;uint16_t&#32;<link linkend="_class_event_manager_1a31b1b079c272a1d7022ed84b01927186">nextEventId</link>;
<anchor xml:id="_event__manager_8h_source_1l00116"/><link linkend="_class_event_manager_1aed2eb3a8bc611f5594eb62304c7b4754">00116</link> &#32;&#32;&#32;&#32;<emphasis role="keywordtype">bool</emphasis>&#32;<link linkend="_class_event_manager_1aed2eb3a8bc611f5594eb62304c7b4754">needsPersistence</link>;
<anchor xml:id="_event__manager_8h_source_1l00117"/><link linkend="_event__manager_8h_1a179817c61d3e66c0f67cd6bfe5e84c1b">00117</link> };
<anchor xml:id="_event__manager_8h_source_1l00118"/>00118 &#32;&#32;&#32;&#32;
<anchor xml:id="_event__manager_8h_source_1l00119"/><link linkend="_class_event_manager_impl">00119</link> <emphasis role="keyword">class&#32;</emphasis><link linkend="_class_event_manager_impl_1a07861026e9c06832168372f64e958073">EventManagerImpl</link>&#32;:&#32;<emphasis role="keyword">public</emphasis>&#32;<link linkend="_class_event_manager_1a89099b22114f158b5c530edfea52371d">EventManager</link>&#32;{
<anchor xml:id="_event__manager_8h_source_1l00120"/>00120 <emphasis role="keyword">public</emphasis>:
<anchor xml:id="_event__manager_8h_source_1l00121"/><link linkend="_class_event_manager_impl_1a07861026e9c06832168372f64e958073">00121</link> &#32;&#32;&#32;&#32;<link linkend="_class_event_manager_impl_1a07861026e9c06832168372f64e958073">EventManagerImpl</link>()&#32;{
<anchor xml:id="_event__manager_8h_source_1l00122"/>00122 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_event_manager_1ab9c4d0fbfc9cf7743eac02bee6223728">init</link>();&#32;<emphasis role="comment">//&#32;Safe&#32;to&#32;call&#32;virtual&#32;functions&#32;here</emphasis>
<anchor xml:id="_event__manager_8h_source_1l00123"/>00123 &#32;&#32;&#32;&#32;}
<anchor xml:id="_event__manager_8h_source_1l00124"/>00124 
<anchor xml:id="_event__manager_8h_source_1l00125"/><link linkend="_class_event_manager_impl_1a8bd15b8b1b4d2439740934f087d97f98">00125</link> &#32;&#32;&#32;&#32;<emphasis role="keywordtype">bool</emphasis>&#32;<link linkend="_class_event_manager_impl_1a8bd15b8b1b4d2439740934f087d97f98">saveToStorage</link>()<emphasis role="keyword">&#32;override&#32;</emphasis>{
<anchor xml:id="_event__manager_8h_source_1l00126"/>00126 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;TODO:&#32;Implement&#32;based&#32;on&#32;chosen&#32;storage&#32;(SD/EEPROM)</emphasis>
<anchor xml:id="_event__manager_8h_source_1l00127"/>00127 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_class_event_manager_1aed2eb3a8bc611f5594eb62304c7b4754">needsPersistence</link>&#32;=&#32;<emphasis role="keyword">false</emphasis>;
<anchor xml:id="_event__manager_8h_source_1l00128"/>00128 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<emphasis role="keyword">true</emphasis>;
<anchor xml:id="_event__manager_8h_source_1l00129"/>00129 &#32;&#32;&#32;&#32;}
<anchor xml:id="_event__manager_8h_source_1l00130"/>00130 &#32;&#32;&#32;&#32;
<anchor xml:id="_event__manager_8h_source_1l00131"/><link linkend="_class_event_manager_impl_1ada54a3fd8ad03891318e203ad0a82155">00131</link> &#32;&#32;&#32;&#32;<emphasis role="keywordtype">bool</emphasis>&#32;<link linkend="_class_event_manager_impl_1ada54a3fd8ad03891318e203ad0a82155">loadFromStorage</link>()<emphasis role="keyword">&#32;override&#32;</emphasis>{
<anchor xml:id="_event__manager_8h_source_1l00132"/>00132 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;TODO:&#32;Implement&#32;based&#32;on&#32;chosen&#32;storage&#32;(SD/EEPROM)</emphasis>
<anchor xml:id="_event__manager_8h_source_1l00133"/>00133 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<emphasis role="keyword">false</emphasis>;
<anchor xml:id="_event__manager_8h_source_1l00134"/>00134 &#32;&#32;&#32;&#32;}
<anchor xml:id="_event__manager_8h_source_1l00135"/>00135 };
<anchor xml:id="_event__manager_8h_source_1l00136"/>00136 
<anchor xml:id="_event__manager_8h_source_1l00137"/>00137 <emphasis role="keyword">extern</emphasis>&#32;<link linkend="_class_event_manager_impl">EventManagerImpl</link>&#32;<link linkend="_event__manager_8cpp_1a2a686792b51ec2b9e1b7bfc9faef92f7">eventManager</link>;
<anchor xml:id="_event__manager_8h_source_1l00138"/>00138 
<anchor xml:id="_event__manager_8h_source_1l00139"/><link linkend="_class_event_emitter">00139</link> <emphasis role="keyword">class&#32;</emphasis><link linkend="_class_event_emitter">EventEmitter</link>&#32;{
<anchor xml:id="_event__manager_8h_source_1l00140"/>00140 <emphasis role="keyword">public</emphasis>:
<anchor xml:id="_event__manager_8h_source_1l00141"/>00141 &#32;&#32;&#32;&#32;<emphasis role="keyword">template</emphasis>&lt;<emphasis role="keyword">typename</emphasis>&#32;T&gt;
<anchor xml:id="_event__manager_8h_source_1l00142"/><link linkend="_class_event_emitter_1a539d733505f9a793439a9cfc4f2af079">00142</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">static</emphasis>&#32;<emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_class_event_emitter_1a539d733505f9a793439a9cfc4f2af079">emit</link>(<link linkend="_event__manager_8h_1a87aefa0e7b725125ea1a741c80858aa7">EventGroup</link>&#32;<link linkend="_event__manager_8h_1ad4291fcb880eb5ecb178b53e32f55741">group</link>,&#32;T&#32;<link linkend="_event__manager_8h_1aeef6900f411bc223febdd92c9435693b">event</link>)&#32;{
<anchor xml:id="_event__manager_8h_source_1l00143"/>00143 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_event__manager_8h_1a2a686792b51ec2b9e1b7bfc9faef92f7">eventManager</link>.logEvent(
<anchor xml:id="_event__manager_8h_source_1l00144"/>00144 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">static_cast&lt;</emphasis>uint8_t<emphasis role="keyword">&gt;</emphasis>(<link linkend="_event__manager_8h_1ad4291fcb880eb5ecb178b53e32f55741">group</link>),&#32;
<anchor xml:id="_event__manager_8h_source_1l00145"/>00145 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">static_cast&lt;</emphasis>uint8_t<emphasis role="keyword">&gt;</emphasis>(<link linkend="_event__manager_8h_1aeef6900f411bc223febdd92c9435693b">event</link>)
<anchor xml:id="_event__manager_8h_source_1l00146"/>00146 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;);
<anchor xml:id="_event__manager_8h_source_1l00147"/>00147 &#32;&#32;&#32;&#32;}
<anchor xml:id="_event__manager_8h_source_1l00148"/>00148 };
<anchor xml:id="_event__manager_8h_source_1l00149"/>00149 
<anchor xml:id="_event__manager_8h_source_1l00150"/>00150 <emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_event__manager_8h_1a467714d66058f52e4ac7aeb6df46b433">checkPowerEvents</link>(<link linkend="_class_power_manager">PowerManager</link>&amp;&#32;pm);
<anchor xml:id="_event__manager_8h_source_1l00151"/>00151 
<anchor xml:id="_event__manager_8h_source_1l00152"/>00152 <emphasis role="preprocessor">#endif</emphasis>
</programlisting></section>
