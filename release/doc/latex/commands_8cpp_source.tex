\doxysection{commands.\+cpp}
\hypertarget{commands_8cpp_source}{}\label{commands_8cpp_source}\index{commands/commands.cpp@{commands/commands.cpp}}
\mbox{\hyperlink{commands_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00001}00001\ \textcolor{comment}{//\ commands/commands.cpp}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00002}00002\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{commands_8h}{commands.h}}"{}}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00003}00003\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{communication_8h}{communication.h}}"{}}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00004}00004\ }
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00005}00005\ \textcolor{comment}{//\ Command\ handler\ function\ type}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00006}\mbox{\hyperlink{commands_8cpp_afd50beeb0940251ffa11aba67ae299bd}{00006}}\ \textcolor{keyword}{using\ }\mbox{\hyperlink{commands_8cpp_afd50beeb0940251ffa11aba67ae299bd}{CommandHandler}}\ =\ std::function<\mbox{\hyperlink{struct_frame}{Frame}}(\textcolor{keyword}{const}\ std::string\&,\ \mbox{\hyperlink{protocol_8h_a9a2c9c31d675b34f6ec35cc1ca89e047}{OperationType}})>;}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00007}\mbox{\hyperlink{commands_8cpp_ab43172cf2203676150a5d2bfc4c1e88a}{00007}}\ \textcolor{keyword}{using\ }\mbox{\hyperlink{commands_8cpp_ab43172cf2203676150a5d2bfc4c1e88a}{CommandMap}}\ =\ std::map<uint32\_t,\ CommandHandler>;}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00008}00008\ }
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00009}\mbox{\hyperlink{commands_8cpp_a04a0515603ba347ef314678876f3fa26}{00009}}\ \mbox{\hyperlink{commands_8cpp_ab43172cf2203676150a5d2bfc4c1e88a}{CommandMap}}\ \mbox{\hyperlink{commands_8cpp_a04a0515603ba347ef314678876f3fa26}{commandHandlers}}\ =\ \{}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00010}00010\ \ \ \ \ \{((\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(1)\ <<\ 8)\ |\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(0)),\ \mbox{\hyperlink{group___diagnostic_commands_gade74b82cf2c20d93c5e0ce624cd7ca77}{handleListCommands}}\},\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Group\ 1,\ Command\ 0}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00011}00011\ \ \ \ \ \{((\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(1)\ <<\ 8)\ |\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(1)),\ \mbox{\hyperlink{group___diagnostic_commands_ga5ebac5711334cb3584974b2b74556543}{handleGetBuildVersion}}\},\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Group\ 1,\ Command\ 1}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00012}00012\ \ \ \ \ \{((\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(1)\ <<\ 8)\ |\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(9)),\ \mbox{\hyperlink{group___diagnostic_commands_ga3a6c6092cd01fd9c13ab429f4a34326d}{handleEnterBootloaderMode}}\},\ \ \ \ \ \ \textcolor{comment}{//\ Group\ 9,\ Command\ 0}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00013}00013\ \ \ \ \ \{((\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(2)\ <<\ 8)\ |\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(0)),\ \mbox{\hyperlink{group___power_commands_gafef922e13071e5fb67da78207a9f22a4}{handleGetPowerManagerIDs}}\},\ \ \ \ \ \ \ \textcolor{comment}{//\ Group\ 2,\ Command\ 2}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00014}00014\ \ \ \ \ \{((\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(2)\ <<\ 8)\ |\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(2)),\ \mbox{\hyperlink{group___power_commands_gad301b8c13cafa148a6f3e80e9b0bcf1a}{handleGetVoltageBattery}}\},\ \ \ \ \ \ \ \ \textcolor{comment}{//\ Group\ 2,\ Command\ 2}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00015}00015\ \ \ \ \ \{((\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(2)\ <<\ 8)\ |\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(3)),\ \mbox{\hyperlink{group___power_commands_ga9f2b608f46080fcdae38a1a8454938b8}{handleGetVoltage5V}}\},\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Group\ 2,\ Command\ 3}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00016}00016\ \ \ \ \ \{((\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(2)\ <<\ 8)\ |\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(4)),\ \mbox{\hyperlink{group___power_commands_ga3f38c538065bf67dbec1142fdb866d16}{handleGetCurrentChargeUSB}}\},\ \ \ \ \ \ \textcolor{comment}{//\ Group\ 2,\ Command\ 4}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00017}00017\ \ \ \ \ \{((\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(2)\ <<\ 8)\ |\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(5)),\ \mbox{\hyperlink{group___power_commands_ga6fbaf484e68c9561ad7fabef21def37b}{handleGetCurrentChargeSolar}}\},\ \ \ \ \textcolor{comment}{//\ Group\ 2,\ Command\ 5}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00018}00018\ \ \ \ \ \{((\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(2)\ <<\ 8)\ |\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(6)),\ \mbox{\hyperlink{group___power_commands_ga83596ea837df6cf7b15e673b95bf524f}{handleGetCurrentChargeTotal}}\},\ \ \ \ \textcolor{comment}{//\ Group\ 2,\ Command\ 6}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00019}00019\ \ \ \ \ \{((\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(2)\ <<\ 8)\ |\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(7)),\ \mbox{\hyperlink{group___power_commands_gabd6610f557fe9deaa9f80d9405738226}{handleGetCurrentDraw}}\},\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Group\ 2,\ Command\ 7}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00020}00020\ \ \ \ \ \{((\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(3)\ <<\ 8)\ |\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(0)),\ \mbox{\hyperlink{clock__commands_8cpp_a1eefb8c4d539d50c787b4db3f6ebb093}{handleTime}}\},\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Group\ 3,\ Command\ 0}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00021}00021\ \ \ \ \ \{((\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(3)\ <<\ 8)\ |\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(1)),\ \mbox{\hyperlink{clock__commands_8cpp_acc9239d946ee18d2ff19af2c6a2177f0}{handleGetTimezoneOffset}}\},\ \ \ \ \ \ \ \ \textcolor{comment}{//\ Group\ 3,\ Command\ 1}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00022}00022\ \ \ \ \ \{((\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(3)\ <<\ 8)\ |\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(2)),\ \mbox{\hyperlink{clock__commands_8cpp_a9e802e312d0779aab74966074e81eb30}{handleSetTimezoneOffset}}\},\ \ \ \ \ \ \ \ \textcolor{comment}{//\ Group\ 3,\ Command\ 2}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00023}00023\ \ \ \ \ \{((\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(3)\ <<\ 8)\ |\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(3)),\ \mbox{\hyperlink{clock__commands_8cpp_add8778da60c0dc5c0add2c7b2ccdc57e}{handleGetClockSyncInterval}}\},\ \ \ \ \ \textcolor{comment}{//\ Group\ 3,\ Command\ 3}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00024}00024\ \ \ \ \ \{((\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(3)\ <<\ 8)\ |\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(4)),\ \mbox{\hyperlink{clock__commands_8cpp_a00137f0d4c6a83ee5c0df49c7370fe65}{handleSetClockSyncInterval}}\},\ \ \ \ \ \textcolor{comment}{//\ Group\ 3,\ Command\ 4}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00025}00025\ \ \ \ \ \{((\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(3)\ <<\ 8)\ |\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(5)),\ \mbox{\hyperlink{clock__commands_8cpp_a6def0bf9e591d66bd98b752f731d44ba}{handleGetClockDrift}}\},\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Group\ 3,\ Command\ 5}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00026}00026\ \ \ \ \ \{((\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(3)\ <<\ 8)\ |\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(6)),\ \mbox{\hyperlink{clock__commands_8cpp_ae4cd7f745d6f9e2cadef70e21d8a9fcb}{handleSetClockDrift}}\},\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Group\ 3,\ Command\ 6}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00027}00027\ \ \ \ \ \{((\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(3)\ <<\ 8)\ |\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(7)),\ \mbox{\hyperlink{clock__commands_8cpp_a17274560343c34119630b27d88ef475e}{handleGetLastSyncTime}}\},\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Group\ 3,\ Command\ 7}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00028}00028\ \ \ \ \ \{((\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(5)\ <<\ 8)\ |\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(1)),\ \mbox{\hyperlink{group___event_commands_gad921fe7254d7ec43f16a6fb21f5c385a}{handleGetLastEvents}}\},\ \ \ \ \textcolor{comment}{//\ Group\ 5,\ Command\ 1}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00029}00029\ \ \ \ \ \{((\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(5)\ <<\ 8)\ |\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(2)),\ \mbox{\hyperlink{group___event_commands_ga6f817db327c7b16cf49575635e595004}{handleGetEventCount}}\},\ \ \ \ \textcolor{comment}{//\ Group\ 5,\ Command\ 2}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00030}00030\ \ \ \ \ \{((\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(7)\ <<\ 8)\ |\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(1)),\ \mbox{\hyperlink{group___g_p_s_commands_gaa4c13d7d324ffb354badf45e9ceffb1c}{handleGPSPowerStatus}}\},\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Group\ 7,\ Command\ 1}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00031}00031\ \ \ \ \ \{((\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(7)\ <<\ 8)\ |\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(2)),\ \mbox{\hyperlink{group___g_p_s_commands_gad12f2e18bdfecbd5b6e8d8a84bb9cd77}{handleEnableGPSTransparentMode}}\},\ \textcolor{comment}{//\ Group\ 7,\ Command\ 3}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00032}00032\ \ \ \ \ \{((\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(7)\ <<\ 8)\ |\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(3)),\ \mbox{\hyperlink{group___g_p_s_commands_ga71881bd1a0a285e4149db732a3f1b533}{handleGetRMCData}}\},\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Group\ 7,\ Command\ 3}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00033}00033\ \ \ \ \ \{((\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(7)\ <<\ 8)\ |\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(4)),\ \mbox{\hyperlink{group___g_p_s_commands_gaf1f6c0fb4266518353e088e8781ed143}{handleGetGGAData}}\},\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Group\ 7,\ Command\ 4}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00034}00034\ \};}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00035}00035\ }
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00036}00036\ }
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00037}\mbox{\hyperlink{commands_8cpp_a1907d400d2c8d8d054ba95bcf43276ea}{00037}}\ \mbox{\hyperlink{struct_frame}{Frame}}\ \mbox{\hyperlink{commands_8cpp_a1907d400d2c8d8d054ba95bcf43276ea}{executeCommand}}(uint32\_t\ commandKey,\ \textcolor{keyword}{const}\ std::string\&\ param,\ \mbox{\hyperlink{protocol_8h_a9a2c9c31d675b34f6ec35cc1ca89e047}{OperationType}}\ operationType)\ \{}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00038}00038\ \ \ \ \ \textcolor{keyword}{auto}\ it\ =\ \mbox{\hyperlink{commands_8cpp_a04a0515603ba347ef314678876f3fa26}{commandHandlers}}.find(commandKey);}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00039}00039\ \ \ \ \ \textcolor{keywordflow}{if}\ (it\ !=\ \mbox{\hyperlink{commands_8cpp_a04a0515603ba347ef314678876f3fa26}{commandHandlers}}.end())\ \{}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00040}00040\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{commands_8cpp_afd50beeb0940251ffa11aba67ae299bd}{CommandHandler}}\ handler\ =\ it-\/>second;}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00041}00041\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ handler(param,\ operationType);}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00042}00042\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00043}00043\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{communication_8h_a54afeb73435419551a1b51a3fd5c3266}{buildFrame}}(\mbox{\hyperlink{protocol_8h_ad13fb53c92ad2af53a95ee45749796d1abb1ca97ec761fc37101737ba0aa2e7c5}{ExecutionResult::ERROR}},\ 0,\ 0,\ \textcolor{stringliteral}{"{}INVALID\ COMMAND"{}});}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00044}00044\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{commands_8cpp_source_l00045}00045\ \}}

\end{DoxyCode}
