\doxysection{lib/comms/frame.cpp File Reference}
\hypertarget{frame_8cpp}{}\label{frame_8cpp}\index{lib/comms/frame.cpp@{lib/comms/frame.cpp}}


Implements functions for encoding, decoding, building, and processing Frames.  


{\ttfamily \#include "{}communication.\+h"{}}\newline
Include dependency graph for frame.\+cpp\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{frame_8cpp__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
using \mbox{\hyperlink{frame_8cpp_a2847cb88200a957abe5098b0cc87556d}{Command\+Handler}} = std\+::function$<$std\+::string(const std\+::string\&, \mbox{\hyperlink{protocol_8h_a9a2c9c31d675b34f6ec35cc1ca89e047}{Operation\+Type}})$>$
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
std\+::string \mbox{\hyperlink{frame_8cpp_ab53898fb6f45dfc657837a665a070959}{encode\+Frame}} (const \mbox{\hyperlink{struct_frame}{Frame}} \&frame)
\begin{DoxyCompactList}\small\item\em Encodes a \doxylink{struct_frame}{Frame} instance into a string. \end{DoxyCompactList}\item 
\mbox{\hyperlink{struct_frame}{Frame}} \mbox{\hyperlink{frame_8cpp_a8f34bc31494430539db21206f084d39d}{decode\+Frame}} (const std\+::string \&data)
\begin{DoxyCompactList}\small\item\em Converts a string into a \doxylink{struct_frame}{Frame} instance. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{frame_8cpp_a8b9407b2f579031cf4b705f1ac03ac31}{process\+Frame\+Data}} (const std\+::string \&data)
\begin{DoxyCompactList}\small\item\em Executes a command based on the command key and the parameter. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{frame_8cpp_a6005ddd6320bebe2a680fa6b8efff6dd}{send\+Event\+Register}} ()
\begin{DoxyCompactList}\small\item\em Sends the event register value to the ground station. \end{DoxyCompactList}\item 
\mbox{\hyperlink{struct_frame}{Frame}} \mbox{\hyperlink{frame_8cpp_a5f43260949ee244d3ee66068eb1d7fc1}{build\+Frame}} (\mbox{\hyperlink{protocol_8h_ad13fb53c92ad2af53a95ee45749796d1}{Execution\+Result}} result, uint8\+\_\+t \mbox{\hyperlink{event__manager_8h_ad4291fcb880eb5ecb178b53e32f55741}{group}}, uint8\+\_\+t command, const std\+::string \&value, const \mbox{\hyperlink{protocol_8h_a2d96449e2b52d45b5726af92084e0d8f}{Value\+Unit}} unit\+Type)
\begin{DoxyCompactList}\small\item\em Builds a \doxylink{struct_frame}{Frame} instance. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
std\+::map$<$ uint32\+\_\+t, \mbox{\hyperlink{group___command_system_gafd50beeb0940251ffa11aba67ae299bd}{Command\+Handler}} $>$ \mbox{\hyperlink{group___command_system_ga04a0515603ba347ef314678876f3fa26}{command\+Handlers}}
\begin{DoxyCompactList}\small\item\em Global map of all command handlers. \end{DoxyCompactList}\item 
volatile uint16\+\_\+t \mbox{\hyperlink{frame_8cpp_ac9c6a252b4ac4dad7cf47681200d3dbe}{event\+Register}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Implements functions for encoding, decoding, building, and processing Frames. 



Definition in file \mbox{\hyperlink{frame_8cpp_source}{frame.\+cpp}}.



\doxysubsection{Typedef Documentation}
\Hypertarget{frame_8cpp_a2847cb88200a957abe5098b0cc87556d}\index{frame.cpp@{frame.cpp}!CommandHandler@{CommandHandler}}
\index{CommandHandler@{CommandHandler}!frame.cpp@{frame.cpp}}
\doxysubsubsection{\texorpdfstring{CommandHandler}{CommandHandler}}
{\footnotesize\ttfamily \label{frame_8cpp_a2847cb88200a957abe5098b0cc87556d} 
using \mbox{\hyperlink{group___command_system_gafd50beeb0940251ffa11aba67ae299bd}{Command\+Handler}} = std\+::function$<$std\+::string(const std\+::string\&, \mbox{\hyperlink{protocol_8h_a9a2c9c31d675b34f6ec35cc1ca89e047}{Operation\+Type}})$>$}



Definition at line \mbox{\hyperlink{frame_8cpp_source_l00003}{3}} of file \mbox{\hyperlink{frame_8cpp_source}{frame.\+cpp}}.



\doxysubsection{Function Documentation}
\Hypertarget{frame_8cpp_ab53898fb6f45dfc657837a665a070959}\index{frame.cpp@{frame.cpp}!encodeFrame@{encodeFrame}}
\index{encodeFrame@{encodeFrame}!frame.cpp@{frame.cpp}}
\doxysubsubsection{\texorpdfstring{encodeFrame()}{encodeFrame()}}
{\footnotesize\ttfamily \label{frame_8cpp_ab53898fb6f45dfc657837a665a070959} 
std\+::string encode\+Frame (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct_frame}{Frame}} \&}]{frame}{}\end{DoxyParamCaption})}



Encodes a \doxylink{struct_frame}{Frame} instance into a string. 


\begin{DoxyParams}{Parameters}
{\em frame} & The \doxylink{struct_frame}{Frame} instance to encode. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The \doxylink{struct_frame}{Frame} encoded as a string.
\end{DoxyReturn}
The encoded string includes the frame direction, operation type, group, command, value, and unit, all delimited by the DELIMITER character. The string is encapsulated by FRAME\+\_\+\+BEGIN and FRAME\+\_\+\+END. 

Definition at line \mbox{\hyperlink{frame_8cpp_source_l00019}{19}} of file \mbox{\hyperlink{frame_8cpp_source}{frame.\+cpp}}.

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=304pt]{frame_8cpp_ab53898fb6f45dfc657837a665a070959_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{frame_8cpp_ab53898fb6f45dfc657837a665a070959_icgraph}
\end{center}
\end{figure}
\Hypertarget{frame_8cpp_a8f34bc31494430539db21206f084d39d}\index{frame.cpp@{frame.cpp}!decodeFrame@{decodeFrame}}
\index{decodeFrame@{decodeFrame}!frame.cpp@{frame.cpp}}
\doxysubsubsection{\texorpdfstring{decodeFrame()}{decodeFrame()}}
{\footnotesize\ttfamily \label{frame_8cpp_a8f34bc31494430539db21206f084d39d} 
\mbox{\hyperlink{struct_frame}{Frame}} decode\+Frame (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{data}{}\end{DoxyParamCaption})}



Converts a string into a \doxylink{struct_frame}{Frame} instance. 


\begin{DoxyParams}{Parameters}
{\em data} & The \doxylink{struct_frame}{Frame} data as a string. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The \doxylink{struct_frame}{Frame} instance. 
\end{DoxyReturn}

\begin{DoxyExceptions}{Exceptions}
{\em std\+::runtime\+\_\+error} & if the frame header is invalid.\\
\hline
\end{DoxyExceptions}
Parses the input string, extracting the frame direction, operation type, group, command, value, and unit. If an error occurs during parsing, an error message is printed to the UART, an error frame is built and sent, and the exception is re-\/thrown. 

Definition at line \mbox{\hyperlink{frame_8cpp_source_l00044}{44}} of file \mbox{\hyperlink{frame_8cpp_source}{frame.\+cpp}}.

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{frame_8cpp_a8f34bc31494430539db21206f084d39d_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{frame_8cpp_a8f34bc31494430539db21206f084d39d_icgraph}
\end{center}
\end{figure}
\Hypertarget{frame_8cpp_a8b9407b2f579031cf4b705f1ac03ac31}\index{frame.cpp@{frame.cpp}!processFrameData@{processFrameData}}
\index{processFrameData@{processFrameData}!frame.cpp@{frame.cpp}}
\doxysubsubsection{\texorpdfstring{processFrameData()}{processFrameData()}}
{\footnotesize\ttfamily \label{frame_8cpp_a8b9407b2f579031cf4b705f1ac03ac31} 
void process\+Frame\+Data (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{data}{}\end{DoxyParamCaption})}



Executes a command based on the command key and the parameter. 


\begin{DoxyParams}{Parameters}
{\em data} & The \doxylink{struct_frame}{Frame} data in string format.\\
\hline
\end{DoxyParams}
Decodes the frame data, extracts the command key, and executes the corresponding command. Sends the response frame. If an error occurs, an error frame is built and sent. 

Definition at line \mbox{\hyperlink{frame_8cpp_source_l00100}{100}} of file \mbox{\hyperlink{frame_8cpp_source}{frame.\+cpp}}.

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{frame_8cpp_a8b9407b2f579031cf4b705f1ac03ac31_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{frame_8cpp_a8b9407b2f579031cf4b705f1ac03ac31_icgraph}
\end{center}
\end{figure}
\Hypertarget{frame_8cpp_a6005ddd6320bebe2a680fa6b8efff6dd}\index{frame.cpp@{frame.cpp}!sendEventRegister@{sendEventRegister}}
\index{sendEventRegister@{sendEventRegister}!frame.cpp@{frame.cpp}}
\doxysubsubsection{\texorpdfstring{sendEventRegister()}{sendEventRegister()}}
{\footnotesize\ttfamily \label{frame_8cpp_a6005ddd6320bebe2a680fa6b8efff6dd} 
void send\+Event\+Register (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Sends the event register value to the ground station. 

This function is called in the main loop to send the current value of the event register. 

Definition at line \mbox{\hyperlink{frame_8cpp_source_l00119}{119}} of file \mbox{\hyperlink{frame_8cpp_source}{frame.\+cpp}}.

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{frame_8cpp_a6005ddd6320bebe2a680fa6b8efff6dd_cgraph}
\end{center}
\end{figure}
\Hypertarget{frame_8cpp_a5f43260949ee244d3ee66068eb1d7fc1}\index{frame.cpp@{frame.cpp}!buildFrame@{buildFrame}}
\index{buildFrame@{buildFrame}!frame.cpp@{frame.cpp}}
\doxysubsubsection{\texorpdfstring{buildFrame()}{buildFrame()}}
{\footnotesize\ttfamily \label{frame_8cpp_a5f43260949ee244d3ee66068eb1d7fc1} 
\mbox{\hyperlink{struct_frame}{Frame}} build\+Frame (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{protocol_8h_ad13fb53c92ad2af53a95ee45749796d1}{Execution\+Result}}}]{result}{, }\item[{uint8\+\_\+t}]{group}{, }\item[{uint8\+\_\+t}]{command}{, }\item[{const std\+::string \&}]{value}{, }\item[{const \mbox{\hyperlink{protocol_8h_a2d96449e2b52d45b5726af92084e0d8f}{Value\+Unit}}}]{unit\+Type}{}\end{DoxyParamCaption})}



Builds a \doxylink{struct_frame}{Frame} instance. 


\begin{DoxyParams}{Parameters}
{\em result} & The execution result. \\
\hline
{\em group} & The group ID. \\
\hline
{\em command} & The command ID. \\
\hline
{\em value} & The value. \\
\hline
{\em unit\+Type} & The value unit type. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The \doxylink{struct_frame}{Frame} instance.
\end{DoxyReturn}
Constructs a \doxylink{struct_frame}{Frame} instance based on the provided parameters. The frame direction and operation type are set based on the execution result. 

Definition at line \mbox{\hyperlink{frame_8cpp_source_l00146}{146}} of file \mbox{\hyperlink{frame_8cpp_source}{frame.\+cpp}}.

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=294pt]{frame_8cpp_a5f43260949ee244d3ee66068eb1d7fc1_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{frame_8cpp_a5f43260949ee244d3ee66068eb1d7fc1_icgraph}
\end{center}
\end{figure}


\doxysubsection{Variable Documentation}
\Hypertarget{frame_8cpp_ac9c6a252b4ac4dad7cf47681200d3dbe}\index{frame.cpp@{frame.cpp}!eventRegister@{eventRegister}}
\index{eventRegister@{eventRegister}!frame.cpp@{frame.cpp}}
\doxysubsubsection{\texorpdfstring{eventRegister}{eventRegister}}
{\footnotesize\ttfamily \label{frame_8cpp_ac9c6a252b4ac4dad7cf47681200d3dbe} 
volatile uint16\+\_\+t event\+Register\hspace{0.3cm}{\ttfamily [extern]}}

