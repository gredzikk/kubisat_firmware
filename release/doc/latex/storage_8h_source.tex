\doxysection{storage.\+h}
\hypertarget{storage_8h_source}{}\label{storage_8h_source}\index{lib/storage/storage.h@{lib/storage/storage.h}}
\mbox{\hyperlink{storage_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00001}00001\ \textcolor{preprocessor}{\#ifndef\ STORAGE\_H}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00002}00002\ \textcolor{preprocessor}{\#define\ STORAGE\_H}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00003}00003\ }
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00004}00004\ \textcolor{preprocessor}{\#include\ <stdio.h>}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00005}00005\ \textcolor{preprocessor}{\#include\ <string.h>}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00006}00006\ \textcolor{preprocessor}{\#include\ <hardware/clocks.h>}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00007}00007\ \textcolor{preprocessor}{\#include\ <hardware/flash.h>}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00008}00008\ \textcolor{preprocessor}{\#include\ "{}blockdevice/flash.h"{}}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00009}00009\ \textcolor{preprocessor}{\#include\ "{}blockdevice/sd.h"{}}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00010}00010\ \textcolor{preprocessor}{\#include\ "{}filesystem/littlefs.h"{}}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00011}00011\ \textcolor{preprocessor}{\#include\ "{}filesystem/vfs.h"{}}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00012}00012\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pin__config_8h}{pin\_config.h}}"{}}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00013}00013\ \textcolor{preprocessor}{\#include\ "{}lfs.h"{}}\ }
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00014}00014\ }
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00015}\mbox{\hyperlink{struct_file_handle}{00015}}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_file_handle}{FileHandle}}\ \{}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00016}\mbox{\hyperlink{struct_file_handle_afc2bbe66c168d4d264f3af1ec037b122}{00016}}\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{struct_file_handle_afc2bbe66c168d4d264f3af1ec037b122}{fd}};}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00017}\mbox{\hyperlink{struct_file_handle_a1c2451d05e2d2937da92fe194e9281cf}{00017}}\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_file_handle_a1c2451d05e2d2937da92fe194e9281cf}{is\_open}};}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00018}00018\ \};}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00019}00019\ }
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00020}00020\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{storage_8h_afb19e37469a751aa61de3dcd0c70b4b0}{fs\_init}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00021}00021\ \mbox{\hyperlink{struct_file_handle}{FileHandle}}\ \mbox{\hyperlink{storage_8h_a921d0d7089c0c7731762035e7feeb27a}{fs\_open\_file}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ filename,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ mode);}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00022}00022\ ssize\_t\ \mbox{\hyperlink{storage_8h_aab35cc4af25dd4a32624e51bf0fcda5b}{fs\_write\_file}}(\mbox{\hyperlink{struct_file_handle}{FileHandle}}\&\ handle,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{main_8cpp_af00b615ca097c43dbb02ae3a00ea3a62}{buffer}},\ \textcolor{keywordtype}{size\_t}\ size);}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00023}00023\ ssize\_t\ \mbox{\hyperlink{storage_8h_a259e40f946e1178329ed6cdf18c35b0c}{fs\_read\_file}}(\mbox{\hyperlink{struct_file_handle}{FileHandle}}\&\ handle,\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{main_8cpp_af00b615ca097c43dbb02ae3a00ea3a62}{buffer}},\ \textcolor{keywordtype}{size\_t}\ size);}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00024}00024\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{storage_8h_a1ed8daa820da91b458072334ecec9618}{fs\_close\_file}}(\mbox{\hyperlink{struct_file_handle}{FileHandle}}\&\ handle);}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00025}00025\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{storage_8h_a4d0e5bbd1f57f47164521ca84c8e6fd1}{fs\_file\_exists}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ filename);}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00026}00026\ }
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00027}00027\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00028}00028\ }
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00029}00029\ \textcolor{comment}{//\ void\ example\_file\_operations()\ \{}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00030}00030\ \textcolor{comment}{//\ \ \ \ \ //\ Open\ a\ file\ for\ writing}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00031}00031\ \textcolor{comment}{//\ \ \ \ \ FileHandle\ log\_file\ =\ fs\_open\_file("{}/log.txt"{},\ "{}w"{});}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00032}00032\ \textcolor{comment}{//\ \ \ \ \ if\ (!log\_file.is\_open)\ \{}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00033}00033\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ uartPrint("{}Failed\ to\ open\ log\ file"{});}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00034}00034\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ return;}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00035}00035\ \textcolor{comment}{//\ \ \ \ \ \}}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00036}00036\ }
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00037}00037\ \textcolor{comment}{//\ \ \ \ \ //\ Write\ some\ data}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00038}00038\ \textcolor{comment}{//\ \ \ \ \ const\ char*\ message\ =\ "{}Hello,\ World!\(\backslash\)n"{};}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00039}00039\ \textcolor{comment}{//\ \ \ \ \ ssize\_t\ written\ =\ fs\_write\_file(log\_file,\ message,\ strlen(message));}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00040}00040\ \textcolor{comment}{//\ \ \ \ \ if\ (written\ <\ 0)\ \{}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00041}00041\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ uartPrint("{}Failed\ to\ write\ to\ log\ file"{});}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00042}00042\ \textcolor{comment}{//\ \ \ \ \ \}}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00043}00043\ }
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00044}00044\ \textcolor{comment}{//\ \ \ \ \ //\ Close\ the\ file}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00045}00045\ \textcolor{comment}{//\ \ \ \ \ fs\_close\_file(log\_file);}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00046}00046\ }
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00047}00047\ \textcolor{comment}{//\ \ \ \ \ //\ Open\ file\ for\ reading}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00048}00048\ \textcolor{comment}{//\ \ \ \ \ log\_file\ =\ fs\_open\_file("{}/log.txt"{},\ "{}r"{});}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00049}00049\ \textcolor{comment}{//\ \ \ \ \ if\ (!log\_file.is\_open)\ \{}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00050}00050\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ uartPrint("{}Failed\ to\ open\ log\ file\ for\ reading"{});}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00051}00051\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ return;}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00052}00052\ \textcolor{comment}{//\ \ \ \ \ \}}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00053}00053\ }
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00054}00054\ \textcolor{comment}{//\ \ \ \ \ //\ Read\ the\ data}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00055}00055\ \textcolor{comment}{//\ \ \ \ \ char\ buffer[128];}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00056}00056\ \textcolor{comment}{//\ \ \ \ \ ssize\_t\ bytes\_read\ =\ fs\_read\_file(log\_file,\ buffer,\ sizeof(buffer)\ -\/\ 1);}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00057}00057\ \textcolor{comment}{//\ \ \ \ \ if\ (bytes\_read\ >\ 0)\ \{}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00058}00058\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ buffer[bytes\_read]\ =\ '\(\backslash\)0';\ \ //\ Null\ terminate\ the\ string}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00059}00059\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ uartPrint(buffer);}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00060}00060\ \textcolor{comment}{//\ \ \ \ \ \}}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00061}00061\ }
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00062}00062\ \textcolor{comment}{//\ \ \ \ \ //\ Close\ the\ file}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00063}00063\ \textcolor{comment}{//\ \ \ \ \ fs\_close\_file(log\_file);}}
\DoxyCodeLine{\Hypertarget{storage_8h_source_l00064}00064\ \textcolor{comment}{//\ \}}}

\end{DoxyCode}
